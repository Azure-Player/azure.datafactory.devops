{
    "id": "1af843b5-35a0-411f-9a18-9eb7a59fb8b8",
    "name": "PublishADFTask",
    "friendlyName": "Publish Azure Data Factory",
    "description": "Deploys entire ADF (v2) from JSON files to ADF instance",
    "helpMarkDown": "[More Information](https://github.com/SQLPlayer/azure.datafactory.devops)",
	"category": "deploy",
    "preview": true,
    "visibility": [
	    "Build",
        "Release"
    ],
    "author": "SQLPlayer",
    "version": {
        "Major": 0,
        "Minor": 1,
        "Patch": 20
     },
    "inputs": [
        {
            "name": "ConnectedServiceName",
            "aliases": ["azureSubscription"],
            "type": "connectedService:AzureRM",
            "label": "Azure Subscription",
            "defaultValue": "",
            "helpMarkDown": "Azure subscription to target for deployment.",
            "required": true
        },
        {
            "name": "ResourceGroupName",
            "type": "pickList",
            "label": "Resource Group Name",
            "required": true,
            "helpMarkDown": "Provide the name of the Resource Group.",
            "properties": {
                "EditableOptions": "True"
            }
        },
		{
            "name": "DataFactoryName",
            "type": "string",
            "label": "Target Azure Data Factory Name",
            "helpMarkDown": "Provide the name of the target Azure Data Factory",
            "required": true
        },
        {
            "name": "DataFactoryCodePath",
            "type": "filePath",
            "label": "Azure Data Factory Path",
            "helpMarkDown": "Path from the repo root to the ADF folder which should contains sub-folders like 'pipeline', 'dataset', etc.",
            "required": true
        },
		{
            "name": "Location",
            "type": "string",
            "label": "Target Region",
            "helpMarkDown": "Azure Region of target Data Factory.\nIt is used only in order to create new instance of ADF.",
            "required": false
        },
		{
            "name": "Include",
            "type": "multiLine",
            "label": "Include objects",
            "helpMarkDown": "Multi-line or comma-separated list of objects to be included in the deployment.\nCan be specify by exact name of wildcard. Example:\npipeline.PL_Copy*\ndataset.ds_srcCopy\ndataset.*",
            "required": false
        },
		{
            "name": "Exclude",
            "type": "multiLine",
            "label": "Exclude objects",
            "helpMarkDown": "Multi-line or comma-separated list of objects to be excluded from the deployment.\nCan be specify by exact name of wildcard. Example:\npipeline.PL_DoNotPublish*\ndataset.ds_temp\nintegrationruntime.*",
            "required": false
        },
        {
            "name": "DeleteNotInSource",
            "type": "boolean",
            "label": "Delete objects not in source",
            "defaultValue": "false",
            "helpMarkDown": "Indicates whether the deployment process should removing objects not existing in the source (code).",
            "required": false
        },
        {
            "name": "StopStartTriggers",
            "type": "boolean",
            "label": "Stop/Start triggers",
            "defaultValue": "true",
            "helpMarkDown": "Indicates whether or not to stop the triggers before beginning deployment and start them afterwards.",
            "required": false
        }
        
    ],
    "dataSourceBindings": [
        {
            "target": "ResourceGroupName",
            "endpointId": "$(ConnectedServiceName)",
            "dataSourceName": "AzureResourceGroups"
        }
    ],
    "instanceNameFormat": "Publish ADF $(DataFactoryName) from JSON files",
    "execution": {
        "PowerShell3": {
            "target": "PublishADF.ps1",
            "platforms": [
                "windows"
            ]
        }
    }
}
